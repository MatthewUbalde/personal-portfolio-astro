---
import { Image } from "astro:assets";
import BaseHead from "../components/Metadata/BaseHead.astro";
import ImageLink from "../components/ImageLink.astro";
import Section from "../components/Section.astro";

import { SITE_NAVIGATION } from "../const";
import socialMedia from "../data/socialMedia";
import type { NavigationTab } from "../const";

const { linkedin, github } = socialMedia;

const pathname = Astro.url.pathname;
const currentPath = pathname;

interface Props {
  title: string;
  description: string;
  enableNav?: boolean;
}

const { title, description, enableNav } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title={"Matthew Ubalde Portfolio | " + title}
      description={description}
    />
  </head>
  <body>
    <main class="flex h-screen w-screen">
      <aside
        class:list={[
          "flex flex-col justify-start items-stretch",
          "h-full w-3/6 min-w-96",
          " bg-black text-white overflow-hidden",
        ]}
      >
        {
          enableNav && (
            <Section class="flex flex-wrap gap-2 py-8 pr-4" ridPadding={true}>
              <a
                class="text-3xl bg-gray-800 px-4 py-2 mr-1 rounded-r-lg"
                href="/"
              >
                {"<"}
              </a>
              {SITE_NAVIGATION.map((nav) => {
                if (nav.href === currentPath) return;

                return (
                  <a
                    class="text-3xl bg-gray-800 px-4 py-2 rounded-lg"
                    href={nav.href}
                  >
                    {nav.label}
                  </a>
                );
              })}
            </Section>
          )
        }
        <Section
          class="flex flex-col justify-center items-start gap-4 h-full w-full px-8"
        >
          <slot name="sidebar" />
        </Section>
      </aside>
      <div
        class="group relative h-full w-full z-10 overflow-hidden overflow-y-auto"
      >
        <slot />
      </div>
    </main>
    <footer
      class="flex justify-center items-center gap-8 h-auto p-8 bg-black text-white"
    >
      <span class="text-xl">Matthew Ubalde</span>
      <div class="flex gap-4">
        <ImageLink
          class="hover:scale-125 active:scale-95 transition-transform"
          link={linkedin}
          width={50}
          height={50}
        />
        <ImageLink
          class="hover:scale-125 active:scale-95 transition-transform"
          link={github}
          width={50}
          height={50}
        />
      </div>
    </footer>
  </body>
</html>
