---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

import BaseLayout from "./BaseLayout.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Section from "../components/Section.astro";
import ImageLink from "../components/ImageLink.astro";

import itchioImage from "../assets/icons/itch-io.svg";
import steamImage from "../assets/icons/steam.svg";
import githubImage from "../assets/icons/github-mark.svg";
import ContainerSection from "../components/ContainerSection.astro";

interface Props {
  prevNav: string;
  title: string;
  description: string;
  coverImage: ImageMetadata;
  coverImageAlt: string;
  summaryPoints: string[];
  dateProjectPublished: Date;
  dateUpdated?: Date;
  itchio?: string;
  steam?: string;
  github?: string;
}

const {
  prevNav,
  title,
  description,
  coverImage,
  coverImageAlt,
  summaryPoints,
  dateProjectPublished,
  dateUpdated,
  itchio,
  steam,
  github,
} = Astro.props;
---

<BaseLayout prevNav={prevNav} title={title} description={description}>
  <main class="min-h-screen">
    <ContainerSection>
      <Section noMargin textContent class="flex-grow">
        <h1>{title}</h1>
        <Image
          class="rounded-md"
          src={coverImage}
          alt={coverImageAlt}
          width="1280"
          height="720"
        />
        <div class="text-sm">
          <span>
            Published: <FormattedDate date={dateProjectPublished} />
          </span> -
          {
            dateUpdated && (
              <span>
                Updated: <FormattedDate date={dateUpdated} />
              </span>
            )
          }
        </div>

        <p>{description}</p>
      </Section>
      <ContainerSection
        noMargin
        noMedia
        col
        class="justify-center items-center"
      >
        {
          summaryPoints && (
            <Section noMargin textContent>
              <h2>Summary Points</h2>
              <ul class="text-start">
                {summaryPoints.map((p) => (
                  <li>{p}</li>
                ))}
              </ul>
            </Section>
          )
        }
        <Section
          noMargin
          noPadding
          class="flex sm:flex-row justify-center items-center gap-2 p-2 w-fit h-fit"
        >
          {
            itchio && (
              <ImageLink
                src={itchioImage}
                alt=""
                href={itchio}
                width={48}
                height={48}
              />
            )
          }
          {
            steam && (
              <ImageLink
                src={steamImage}
                alt=""
                href={steam}
                width={48}
                height={48}
              />
            )
          }
          {
            github && (
              <ImageLink
                src={githubImage}
                alt=""
                href={github}
                width={48}
                height={48}
              />
            )
          }
        </Section>
      </ContainerSection>
    </ContainerSection>
    <Section articleContent>
      <slot />
    </Section>
  </main>
</BaseLayout>
