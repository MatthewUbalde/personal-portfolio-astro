---
import type { HTMLAttributes } from "astro/types";

import { SITE_NAVIGATION } from "../../const";
import NavLink from "./NavLink.astro";

interface Props extends HTMLAttributes<"nav"> {
  prev?: string;
  current: string;
}

const props = Astro.props;
---

<nav-bar class:list={[props.class, "z-50 fixed left-0 top-0"]} {...props}>
  <button class="text-4xl my-4 py-1 bg-cyan-900 rounded-r-md">â‹®</button>
  <nav
    class:list={["hidden w-full p-8 bg-cyan-900 rounded-r-md", props.class]}
    {...props}
  >
    {SITE_NAVIGATION.map((link) => <NavLink {...link} />)}
  </nav>
</nav-bar>

<script>
  class Navbar extends HTMLElement {
    connectedCallback() {
      const dropdownButton = this.querySelector("button");
      const navigation = this.querySelector("nav");

      dropdownButton?.addEventListener("click", () => {
        navigation?.classList.toggle("hidden");
      });
    }
  }

  customElements.define("nav-bar", Navbar);
</script>
