---
import { getCollection } from "astro:content";

import ImageLink from "../components/ImageLink.astro";
import { SITE_NAVIGATION } from "../const";
import { icons } from "../assets/globs";
import ContainerContent from "./ContainerContent.astro";
import type { HTMLAttributes } from "astro/types";

const socialMedia = await getCollection("socialMedia");
const socialMediaData = socialMedia.map((s) => s.data);

socialMediaData.forEach((s) => {
  if (!icons[s.imagePath])
    throw new Error(`"${s.imagePath} does not exist in glob", ${icons}""`);
});

type Props = HTMLAttributes<"footer">;

const props = Astro.props;
---

<footer class:list={["flex gap-2 m-4", props.class]} {...props}>
  <!-- Site Map -->
  <div class="text-sm text-center [writing-mode:vertical-rl]">Site Map</div>
  <div class="flex flex-row justify-start items-start gap-2 flex-wrap">
    {
      SITE_NAVIGATION.map((nav) => (
        <div class="flex flex-col justify-center items-start flex-wrap p-2 bg-cyan-900 bg-opacity-50 rounded-md">
          <a href={nav.href}>{nav.label}</a>
          {nav.children && (
            <div class="flex flex-row gap-2 flex-wrap text-cyan-100">
              {nav.children.map((cnav) => (
                <a href={`${nav.href}${cnav.href}`} class="text-sm">
                  {cnav.label}
                </a>
              ))}
            </div>
          )}
        </div>
      ))
    }
  </div>
  <!-- Credits and social media
  <ContainerContent class="h-fit">
    <div class="flex justify-center items-center gap-2 m-1">
      {
        socialMediaData.map((s) => (
          <ImageLink
            class="bg-cyan-950 p-1 rounded-md"
            src={icons[s.imagePath]()}
            href={s.href}
            alt={s.alt}
            width={36}
            height={36}
          />
        ))
      }
    </div>
  </ContainerContent> -->
</footer>
